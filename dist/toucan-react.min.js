!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e=e||self)["toucan-react"]=t(e.React)}(this,function(e){"use strict";var t="default"in e?e.default:e;function n(e,t){return new Promise(function(n,o){if(t)!function e(t){"undefined"!=typeof ToucanAI&&t(),setTimeout(()=>e(t),200)}(n);else{var s=document.createElement("script");s.async=!1,s.src=e,s.addEventListener("load",n),s.addEventListener("error",o),document.getElementsByTagName("body")[0].appendChild(s)}})}return class extends e.Component{constructor(e){super(e),this.toucanInstance=null}componentDidMount(){n((this.props.resourceRoot||"https://dev.toucanai.com:91")+"/widget.js",this.props.alreadyLoaded).then(()=>{let e=Object.assign({},this.props);e.embeddedMode&&!e.parent&&(e.parent=this.container),e.onReady=(e=>{this.toucanInstance=e,this.props.onReady&&this.props.onReady(e)}),new ToucanAI(e)})}componentDidUpdate(e){this.props.loadConvo!==e.loadConvo&&this.toucanInstance&&this.toucanInstance.changeConversation(this.props.loadConvo)}render(){return this.props.embeddedMode&&!this.props.parent?t.createElement("div",{style:{width:"100%",height:"100%"},ref:e=>this.container=e}):null}}});
